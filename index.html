<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Happy Valentine My Love ðŸ’–</title>

<!-- Custom Font -->
<style>
@font-face {
    font-family: 'HeartFont';
    src: url('https://raw.githubusercontent.com/Aari07/Valentine_Proposal/main/fonts/TheHeartOfEverything.ttf') format('truetype');
}
</style>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: #f49cbb;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    overflow-x: hidden;
    transition: 0.4s ease;
}

body.night {
    background: #121220;
    color: white;
}

.card {
    width: 95%;
    max-width: 520px;
    background: #ffffff;
    border-radius: 25px;
    padding: 35px 25px;
    text-align: center;
    position: relative;
    box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    transition: 0.4s ease;
}

body.night .card {
    background: #1e1e35;
}

.gif {
    width: 260px;
    height: 260px;
    object-fit: contain;
    margin-bottom: 15px;
}

.proposal-text {
    font-family: 'HeartFont', cursive;
    font-size: 30px;
    margin-bottom: 15px;
}

.sub-text {
    font-size: 18px;
    margin-bottom: 25px;
}

.buttons {
    position: relative;
    height: 90px;
}

.btn {
    width: 130px;
    height: 55px;
    border-radius: 999px;
    border: none;
    font-size: 18px;
    cursor: pointer;
    position: absolute;
    transition: 0.3s ease;
}

#yesBtn {
    background: #ff4d6d;
    color: white;
    left: 15%;
}

#yesBtn:hover {
    animation: heartbeat 0.8s infinite;
}

@keyframes heartbeat {
    0% { transform: scale(1); }
    50% { transform: scale(1.15); }
    100% { transform: scale(1); }
}

#noBtn {
    background: #d9d9d9;
    left: 55%;
}

.message {
    margin-top: 15px;
    color: #ff4d6d;
    min-height: 24px;
}

.hidden { display: none; }

.playAgain {
    margin-top: 20px;
    padding: 10px 25px;
    border: none;
    border-radius: 999px;
    background: #ff4d6d;
    color: white;
    cursor: pointer;
}

#themeToggle {
    position: fixed;
    top: 20px;
    right: 20px;
    border: none;
    background: white;
    padding: 8px 14px;
    border-radius: 20px;
    cursor: pointer;
    z-index: 10;
}

body.night #themeToggle {
    background: #2a2a4a;
    color: white;
}

/* Floating hearts */
.heart {
    position: fixed;
    bottom: -20px;
    color: #ff4d6d;
    animation: floatUp 7s linear infinite;
    pointer-events: none;
}

@keyframes floatUp {
    to {
        transform: translateY(-110vh);
        opacity: 0;
    }
}

canvas {
    position: fixed;
    top: 0;
    left: 0;
    pointer-events: none;
}
</style>
</head>

<body>

<button id="themeToggle">ðŸŒ™ Dark Mode</button>

<!-- Background Music -->
<audio id="bgMusic" autoplay loop>
  <source src="https://raw.githubusercontent.com/Aari07/Valentine_Proposal/main/audio/hearty-touching-soft.mp3" type="audio/mp3">
</audio>

<canvas id="fireworksCanvas"></canvas>

<div class="card" id="mainCard">
    <img class="gif"
    src="https://github.com/user-attachments/assets/1f43b9bd-9c9c-41e1-b346-30de233e5ff8" />

    <h2 class="proposal-text">
        Nonu, will you be my valentine? ðŸ’–
    </h2>

    <div class="sub-text">
        You make my world brighter every single day âœ¨
    </div>

    <div class="buttons">
        <button id="yesBtn" class="btn">Yes ðŸ’–</button>
        <button id="noBtn" class="btn">No ðŸ˜œ</button>
    </div>

    <div class="message" id="message"></div>
</div>

<div class="card hidden" id="congratsCard">
    <img class="gif"
    src="https://github.com/user-attachments/assets/898a70cd-1bfb-41f4-8abc-d4a1784bb795" />

    <h1>YAY I KNEW IT ðŸ’–</h1>
    <h2 id="typeMessage"></h2>

    <button class="playAgain" id="playAgainBtn">Play Again</button>
</div>

<script>
const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
const messageBox = document.getElementById("message");
const mainCard = document.getElementById("mainCard");
const congratsCard = document.getElementById("congratsCard");
const playAgainBtn = document.getElementById("playAgainBtn");
const typeMessage = document.getElementById("typeMessage");
const themeToggle = document.getElementById("themeToggle");
const bgMusic = document.getElementById("bgMusic");

/* ===== Autoplay Fix ===== */
window.addEventListener("load", () => {
    const playPromise = bgMusic.play();
    if (playPromise !== undefined) {
        playPromise.catch(() => {
            document.addEventListener("click", () => {
                bgMusic.play();
            }, { once: true });
        });
    }
});

/* ===== Theme Toggle ===== */
themeToggle.addEventListener("click", () => {
    document.body.classList.toggle("night");
});

/* ===== Floating Hearts ===== */
function createHeart() {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.innerHTML = "ðŸ’–";
    heart.style.left = Math.random()*100 + "vw";
    heart.style.fontSize = Math.random()*20 + 15 + "px";
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(),7000);
}
setInterval(createHeart, 800);

/* ===== Random NO Messages ===== */
const messages = [
    "No is illegal ðŸ˜",
    "Wrong choice buddy ðŸ˜œ",
    "Try again ðŸ˜Œ",
    "You know the answer ðŸ’–",
    "Don't break my heart ðŸ’”"
    "Donâ€™t press it ðŸ˜’",
"I donâ€™t like no",
"Wrong choice buddy",
"That button is broken",
"You know what to press",
"No is illegal here",
"Try again ðŸ˜",
"Seriously?",
"That hurts",
"Please press yes",
"Iâ€™m judging you",
"Youâ€™re better than this",
"Think again",
"Heart says yes",
"Brain says yes",
"Universe says yes",
"Why no though?",
"Thatâ€™s suspicious",
"You missed the point",
"Almost romanticâ€¦ almost",
"Come on now",
"Youâ€™re teasing me",
"Stop resisting",
"Destiny says yes",
"Be brave",
"This is getting awkward",
"You KNOW the answer",
"I believe in you",
"Donâ€™t fight love",
"Say yes already",
"Not cool",
"Try hovering yes",
"Thatâ€™s rude",
"Plot twist: yes",
"Nope is not allowed",
"Nice try",
"Emotional damage",
"Youâ€™re testing me",
"Love > No",
"Just press yes",
"This button lies",
"Wrong universe",
"Error 404: No not found",
"Stop clicking me",
"Okay now yes",
"This is fate",
"Final warning",
"Why are you like this?",
"Iâ€™m running out of patience",
"Last chance ðŸ˜¤"
];

noBtn.addEventListener("mouseenter", () => {
    const x = Math.random() * 80 - 40;
    const y = Math.random() * 50 - 25;
    noBtn.style.transform = `translate(${x}px, ${y}px)`;
    messageBox.textContent =
        messages[Math.floor(Math.random()*messages.length)];
});

/* ===== Typewriter ===== */
function typeWriter(text, speed=60) {
    typeMessage.textContent="";
    let i=0;
    function typing(){
        if(i<text.length){
            typeMessage.textContent+=text[i];
            i++;
            setTimeout(typing,speed);
        }
    }
    typing();
}

/* ===== Fireworks ===== */
const canvas = document.getElementById("fireworksCanvas");
const ctx = canvas.getContext("2d");
let particles=[];
let animationId;
let fireInterval;

function resizeCanvas(){
    canvas.width=window.innerWidth;
    canvas.height=window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize",resizeCanvas);

function createFirework(x,y){
    for(let i=0;i<70;i++){
        particles.push({
            x,y,
            angle:Math.random()*2*Math.PI,
            speed:Math.random()*5+2,
            alpha:1
        });
    }
}

function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach((p,i)=>{
        p.x+=Math.cos(p.angle)*p.speed;
        p.y+=Math.sin(p.angle)*p.speed;
        p.alpha-=0.02;
        ctx.fillStyle=`rgba(255,0,120,${p.alpha})`;
        ctx.beginPath();
        ctx.arc(p.x,p.y,2,0,Math.PI*2);
        ctx.fill();
        if(p.alpha<=0) particles.splice(i,1);
    });
    animationId=requestAnimationFrame(animate);
}

function startFireworks(){
    animate();
    fireInterval=setInterval(()=>{
        createFirework(Math.random()*canvas.width,
                       Math.random()*canvas.height/2);
    },700);
}

function stopFireworks(){
    cancelAnimationFrame(animationId);
    clearInterval(fireInterval);
    ctx.clearRect(0,0,canvas.width,canvas.height);
}

/* ===== YES CLICK ===== */
yesBtn.addEventListener("click",()=>{
    mainCard.classList.add("hidden");
    congratsCard.classList.remove("hidden");
    typeWriter("Happy Valentine my love ðŸ’–");
    startFireworks();
});

/* ===== Play Again ===== */
playAgainBtn.addEventListener("click",()=>{
    congratsCard.classList.add("hidden");
    mainCard.classList.remove("hidden");
    messageBox.textContent="";
    noBtn.style.transform="translate(0,0)";
    stopFireworks();
});
</script>

</body>
</html>
